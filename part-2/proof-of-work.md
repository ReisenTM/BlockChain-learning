# 工作量证明

在前面的区块链中，我们创建一个区块的成本过低，显得有些“太廉价”了

BTC在这方面使用了`POW`，即`proof of work`工作量证明

---

## 概念
其本质就是暴力算法计算直到满足某个条件才跳出
> 例如 :计算一个区块的hash，直到满足前20位必须是0，才是合格区块

比特币使用 [Hashcash](https://en.wikipedia.org/wiki/Hashcash) ，一个最初用来防止垃圾邮件的工作量证明算法。它可以被分解为以下步骤：

1. 取一些公开的数据（比如，如果是 email 的话，它可以是接收者的邮件地址；在比特币中，它是区块头）
2. 给这个公开数据添加一个计数器。计数器默认从 0 开始
3. 将 data(数据) 和 counter(计数器) 组合到一起，获得一个哈希
4. 检查哈希是否符合一定的条件：
5. 如果符合条件，结束
6. 如果不符合，增加计数器，重复步骤 3-4


## 实现

BTC的实现还考虑了动态调整难度,暂且不实现

**示例**

在 NewProofOfWork 函数中，我们将 big.Int 初始化为 1，
然后左移 `256 - targetBits` 位。`256` 是一个 SHA-256 哈希的位数，我们将要使用的是 SHA-256 哈希算法。target（目标） 的 16 进制形式为：

`0x10000000000000000000000000000000000000000000000000000000000`

它在内存上占据了 29 个字节。下面是与前面例子哈希的形式化比较：
`0fac49161af82ed938add1d8725835cc123a1a87b1b196488360e58d4bfb51e3
0000010000000000000000000000000000000000000000000000000000000000
0000008b0f41ec78bab747864db66bcb9fb89920ee75f43fdaaeb5544f7f76ca`

第一个哈希比目标要大，因此它并不是一个有效的工作量证明。第二个哈希比目标要小，所以是一个有效的证明。